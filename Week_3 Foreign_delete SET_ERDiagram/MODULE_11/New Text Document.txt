CREATE TABLE STUDENT
(
	ROLL VARCHAR(4) PRIMARY KEY,
    NAME VARCHAR(50)
);

CREATE TABLE LIBRARIAN
(
	LIB_ID VARCHAR(4) PRIMARY KEY,
    LIB_NAME VARCHAR(50)
);
CREATE TABLE BOOK
(
	BOOK_ID VARCHAR(4) PRIMARY KEY,
    BOOK_NAME VARCHAR(50),
    BOOK_GENRE VARCHAR(50)
);



CREATE TABLE BORROW
(
	WHO_BORROW_ROLL VARCHAR(4),
    WHICH_BOOK_ID VARCHAR(4),
	BORROW_DATE DATE,
    RETURN_DATE DATE,
    
    Constraint borrow_to_student FOREIGN KEY(WHO_BORROW_ROLL) REFERENCES student(ROLL),
    Constraint borrow_to_book FOREIGN KEY(WHICH_BOOK_ID) REFERENCES BOOK(book_id),
	PRIMARY KEY(WHO_BORROW_ROLL, WHICH_BOOK_ID)
);


CREATE TABLE PERMISSION
(
    WHICH_BOOK_ID VARCHAR(4),
    WHO_PERMITTED_LIB_ID VARCHAR(4),
    
    Constraint permission_to_libarian FOREIGN KEY(WHO_PERMITTED_LIB_ID) REFERENCES LIBRARIAN(LIB_ID),
	Constraint permission_book FOREIGN KEY(WHICH_BOOK_ID) REFERENCES BOOK(book_id),
	PRIMARY KEY(WHICH_BOOK_ID, WHO_PERMITTED_LIB_ID)
);












